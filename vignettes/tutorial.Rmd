---
title: "bibliographica vignette"
author: "Leo Lahti, Niko Ilomaki, Mikko Tolonen"
date: "`r Sys.Date()`"
bibliography: 
- bibliography.bib
- references.bib
output: html_document
---
<!--
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteIndexEntry{bibliographica vignette}
  %\usepackage[utf8]{inputenc}
-->


R tools for bibliographic data analysis
===========

The bibliographica R package provides tools for automated extraction and analysis of bibliographic metadata collections (library catalogues) such as the [ESTC](http://estc.bl.uk/F/?func=file&file_name=login-bl-estc). The toolkit includes functions to extract and clean up information from plain text library catalogue annotation fields following common standards such as the [Bibliographic Processing Cataloging Rules](https://www.libraries.psu.edu/psul/cataloging/training/bpcr/300.html). This package can be used in combination with any library catalogue that follows these common standards.

Your [contributions](http://ropengov.github.com/contribute.html), [bug
reports and suggestions](https://github.com/ropengov/bibliographica) are
welcome!

## Installation

We assume you have installed [R](http://www.r-project.org/). If you
use [RStudio](http://www.rstudio.com/ide/download/desktop), change the
default encoding to UTF-8. 

Installing the stable release version in R:

```{r install, eval=FALSE}
library(devtools)
install_github("ropengov/bibliographica")
```

Load the tools and set UTF-8 encoding

```{r test, message=FALSE, warning=FALSE, eval=TRUE, message=FALSE}
library(bibliographica)
library(knitr)
Sys.setlocale(locale="UTF-8") 
```

## Harmonizing textual annotation fields in library catalogues

Below, you will find simple examples on the package functionality. In real studies the tools can be used to preprocess collections with millions of documents.


### Page information

Estimate the total page count:

```{r pages, message=FALSE, warning=FALSE, eval=TRUE}
unlist(polish_pages(c("50 p.", "[6],viii,386p. ;"))$estimated.pages)
```

### Volume information

Pick information on the volume numbers:

```{r voln, message=FALSE, warning=FALSE, eval=TRUE}
# Volume number 3 from multi-volume document
unlist(polish_volumenumber("v.3, 50 p"))
```

Pick information on the total volume count:

```{r volc, message=FALSE, warning=FALSE, eval=TRUE}
# Document with 4 volumes and missing page information
unlist(polish_volumecount("4v.")) 
```

### Dimension information

Extract and print dimension information:

```{r dimensions, message=FALSE, eval=TRUE}
res <- polish_dimensions("1/2to (37 cm)")
knitr::kable(res)
```

Also the missing fields can be estimated:

```{r dimensions2, message=FALSE, eval=TRUE}
res <- polish_dimensions("1/2to (37 cm)", fill = TRUE)
knitr::kable(res)
```

Estimation of the missing information (gatherings, width, and/or height) is based on a ready-made [approximation table](https://github.com/rOpenGov/bibliographica/blob/master/inst/extdata/documentdimensions.csv). The table can be changed by the user (see function arguments). The default table can be retrieved in R with:

```{r dimtab, message=FALSE, warning=FALSE, eval=TRUE}
dtab <- dimension_table()
kable(head(dtab)) # just print the first rows
```

### Sheet size table

Estimate sheet area in cm2:

```{r sheetarea2}
sheet_area("folio")
```

Sheet sizes are here calculated according to the [sheet size table](https://github.com/rOpenGov/bibliographica/blob/master/inst/extdata/sheetsizes.csv). The table can be changed by the user (see the function arguments) but by default the functions use this mapping:

```{r sheetarea, message=FALSE, warning=FALSE, eval=TRUE}
kable(sheet_area()) 
```


### Stopwords

Removing [stopwords](http://en.wikipedia.org/wiki/Stop_words) is often necessary in text analysis. The stopwords form multiple categories, such as individual letters, conjugates, special characters, or particular expressions. The definition of a stopword may also depend on a context. The following example removes the term "well" and individual letters from the input vector:

```{r stopw, message=FALSE, warning=FALSE, eval=TRUE}
remove_stopwords(c("a", "well", "james", "30 year war"), terms = "well", remove.letters = TRUE)
```

For a full list of stopword and related functions, see the [function documentation](https://github.com/rOpenGov/bibliographica/blob/master/man/)- We also provide some [ready-made stopword lists](https://github.com/rOpenGov/bibliographica/tree/master/inst/extdata).


## Licensing and Citations

This work can be freely used, modified and distributed under the 
[Two-clause BSD license](http://en.wikipedia.org/wiki/BSD\_licenses).

```{r citation, message=FALSE}
citation("bibliographica")
```


## Session info

This vignette was created with

```{r sessioninfo, message=FALSE, warning=FALSE}
sessionInfo()
```
